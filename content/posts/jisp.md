Title: Пару дней назад я подсел на jisp
Slug: jisp
Date: 2014-07-11 14:30
Category: texts
Tags: lisp
Lang: ru

Пару дней назад я подсел на [jisp][]. А дело было так:

Последние год-полтора я интересуюсь разными лиспами. Одно время начал было писать один pet-прожект на [CommonLisp][cl], но потом он отошел на второй план. Пару месяцев назад же наткнулся на [Arc Lisp][arc], который синтаксически во многих местах гораздо приятнее Common Lisp и Scheme. Тогда я начал искать, где бы применить Arc, и наткнулся на пару его реализаций на JavaScript, которые позволяют запускать Arc в браузере. Первая - [rainbow.js][], оказалась неподдерживаемым более портом [Java версии][rainbow]. Второй интерпретатор — [arc-js][], тоже оказался неподходящ для моих целей, так как представляет собой виртуальную машину которой сложно взаимодействовать с внешними JavaScript библиотеками. Однако, автор arc-js, Shin Aoyama, навел меня еще на один лисп, заточенный на плотную интеграцию в JavaScript — jisp. Jisp это не интерпретатор, а компилятор непосредственно в JavaScript. Поэтому там нет никаких проблем с тем, чтобы передать callback во внешнюю библиотеку или подергать jquery.

Должен предупредить, что если вы будете искать в интернетах по слову "jisp", то найдете не те джиспы. Так что пользуетесь ссылой. 

Зачем, вы спросите, тащить lisp, когда JavaScript и без того прекрасен? Те кто считают что JavaScript прекрасен, могут перестать читать эту статью. Черт, надо было это вас сказать еще в первом абзаце! :-)

Итак, зачем на фронтенде lisp? Затем, что он позволяет более гибко создавать абстракции и код становится более читаемым. Вот пример из кода, что я переписал на днях. В небольшом проекте я использую [angular.js][], и все мои контролы выглядят примерно так:

```
the_app.controller(
    'SearchCtrl',
    ['$scope', '$http',
     function ($scope, $http) {
         $http.get('/api/search/').success(function(data) {
             $scope.results = data;
         });
     }]);
```


Благодаря паре макросов, читать код сталновится гораздо проще:

```
(controller "SearchCtrl" ($scope $http)
            (http_get "/api/search/"
                      (= $scope.results data)))
```

Вся эта портянка из калбэков, не несущая бизнес-логики теперь скрыта и не мешает читать действительно важный код.
По-моему, это прекрасно!

Конечно, в настоящий момент компилятору всего месяц отроду, не всегда он делает то, что от него ожидаешь, зато разработчик, [Ярослав Богучарский][yaroslav], очень отзывчивый и с ним всегда можно поговорить на родном для нас языке. Поэтому я всех призываю попробовать этот компилятор. Ваши отзывы, несомненно, помогут сделать его лучше! 

[cl]: http://ru.wikipedia.org/wiki/Common_Lisp
[jisp]: http://jisp.io
[arc]: http://www.paulgraham.com/arc.html
[yaroslav]: http://www.mitranim.com
[arc-js]: https://github.com/smihica/arc-js
[rainbow.js]: https://github.com/arclanguage/rainbow-js
[rainbow]: https://github.com/conanite/rainbow
[angular.js]: https://angularjs.org